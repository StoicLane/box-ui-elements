{"version":3,"sources":["../../../src/components/radar/RadarAnimation.tsx"],"names":["React","uniqueId","TetherComponent","RadarAnimationPosition","positions","BOTTOM_CENTER","attachment","targetAttachment","BOTTOM_LEFT","BOTTOM_RIGHT","MIDDLE_CENTER","MIDDLE_LEFT","MIDDLE_RIGHT","TOP_CENTER","TOP_LEFT","TOP_RIGHT","RadarAnimation","createRef","isShown","props","tetherRef","current","position","children","className","constrainToScrollParent","constrainToWindow","offset","tetherElementClassName","rest","constraints","push","to","child","Children","only","referenceElement","cloneElement","radarAnimationID","tetherProps","classPrefix","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport uniqueId from 'lodash/uniqueId';\nimport TetherComponent from 'react-tether';\n\nimport './RadarAnimation.scss';\n\nexport enum RadarAnimationPosition {\n    BOTTOM_CENTER = 'bottom-center',\n    BOTTOM_LEFT = 'bottom-left',\n    BOTTOM_RIGHT = 'bottom-right',\n    MIDDLE_CENTER = 'middle-center',\n    MIDDLE_LEFT = 'middle-left',\n    MIDDLE_RIGHT = 'middle-right',\n    TOP_CENTER = 'top-center',\n    TOP_LEFT = 'top-left',\n    TOP_RIGHT = 'top-right',\n}\n\nconst positions = {\n    [RadarAnimationPosition.BOTTOM_CENTER]: {\n        attachment: 'top center',\n        targetAttachment: 'bottom center',\n    },\n    [RadarAnimationPosition.BOTTOM_LEFT]: {\n        attachment: 'top left',\n        targetAttachment: 'bottom left',\n    },\n    [RadarAnimationPosition.BOTTOM_RIGHT]: {\n        attachment: 'top right',\n        targetAttachment: 'bottom right',\n    },\n    [RadarAnimationPosition.MIDDLE_CENTER]: {\n        attachment: 'middle center',\n        targetAttachment: 'middle center',\n    },\n    [RadarAnimationPosition.MIDDLE_LEFT]: {\n        attachment: 'middle right',\n        targetAttachment: 'middle left',\n    },\n    [RadarAnimationPosition.MIDDLE_RIGHT]: {\n        attachment: 'middle left',\n        targetAttachment: 'middle right',\n    },\n    [RadarAnimationPosition.TOP_CENTER]: {\n        attachment: 'bottom center',\n        targetAttachment: 'top center',\n    },\n    [RadarAnimationPosition.TOP_LEFT]: {\n        attachment: 'bottom left',\n        targetAttachment: 'top left',\n    },\n    [RadarAnimationPosition.TOP_RIGHT]: {\n        attachment: 'bottom right',\n        targetAttachment: 'top right',\n    },\n};\n\nexport interface RadarAnimationProps {\n    /** A React element to put the radar on */\n    children: React.ReactChild;\n    /** A CSS class for the radar */\n    className?: string;\n    /** Whether to constrain the radar to the element's scroll parent. Defaults to `false` */\n    constrainToScrollParent: boolean;\n    /** Whether to constrain the radar to window. Defaults to `true` */\n    constrainToWindow: boolean;\n    /** Forces the radar to be shown or hidden - defaults to true */\n    isShown: boolean;\n    /** A string of the form 'vert-offset horiz-offset' which controls positioning */\n    offset?: string;\n    /** Where to position the radar relative to the wrapped component */\n    position: RadarAnimationPosition;\n    /** A CSS class for the tether element component */\n    tetherElementClassName?: string;\n}\n\nclass RadarAnimation extends React.Component<RadarAnimationProps> {\n    tetherRef = React.createRef<TetherComponent>();\n\n    radarAnimationID = uniqueId('radarAnimation');\n\n    static defaultProps = {\n        constrainToScrollParent: false,\n        constrainToWindow: true,\n        isShown: true,\n        position: RadarAnimationPosition.MIDDLE_RIGHT,\n    };\n\n    // Instance API: Forces the radar to be repositioned\n    position = () => {\n        const { isShown } = this.props;\n        if (this.tetherRef.current && isShown) {\n            this.tetherRef.current.position();\n        }\n    };\n\n    render() {\n        const {\n            children,\n            className = '',\n            constrainToScrollParent,\n            constrainToWindow,\n            position,\n            isShown,\n            offset,\n            tetherElementClassName,\n            ...rest\n        } = this.props;\n\n        const constraints = [];\n        if (constrainToScrollParent) {\n            constraints.push({\n                to: 'scrollParent',\n                attachment: 'together',\n            });\n        }\n        if (constrainToWindow) {\n            constraints.push({\n                to: 'window',\n                attachment: 'together',\n            });\n        }\n\n        const { attachment, targetAttachment } = positions[position];\n        const child = React.Children.only(children);\n        const referenceElement = React.cloneElement(child as React.ReactElement, {\n            'aria-describedby': this.radarAnimationID,\n        });\n\n        // Typescript defs seem busted for older versions of react-tether\n        const tetherProps: {\n            attachment: string;\n            className?: string;\n            classPrefix: string;\n            constraints: {};\n            targetAttachment: string;\n            offset?: string;\n        } = {\n            attachment,\n            classPrefix: 'radar-animation',\n            constraints,\n            targetAttachment,\n        };\n\n        if (tetherElementClassName) {\n            tetherProps.className = tetherElementClassName;\n        }\n\n        if (offset) {\n            tetherProps.offset = offset;\n        }\n\n        return (\n            <TetherComponent ref={this.tetherRef} {...tetherProps}>\n                {referenceElement}\n                {isShown && (\n                    <div className={`radar ${className}`} id={this.radarAnimationID} {...rest}>\n                        <div className=\"radar-dot\" />\n                        <div className=\"radar-circle\" />\n                    </div>\n                )}\n            </TetherComponent>\n        );\n    }\n}\n\nexport default RadarAnimation;\n"],"file":"RadarAnimation.js"}
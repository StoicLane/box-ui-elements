{"version":3,"sources":["../../../src/components/modal/ModalDialog.js"],"names":["React","classNames","omit","uniqueId","defineMessages","injectIntl","IconBack","IconClose","ALERT_TYPE","DIALOG_TYPE","messages","backModalText","closeModalText","ModalDialog","event","onRequestBack","props","onRequestClose","intl","formatMessage","onBackButtonClick","closeButtonProps","onCloseButtonClick","children","type","elements","Children","toArray","length","Error","modalID","className","modalRef","title","rest","isAlertType","divProps","role","renderBackButton","renderCloseButton","renderContent","Component","ModalDialogBase"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from 'lodash/omit';\nimport uniqueId from 'lodash/uniqueId';\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport IconBack from '../../icon/fill/Arrow16';\nimport IconClose from '../../icon/fill/X16';\n\nconst ALERT_TYPE = 'alert';\nconst DIALOG_TYPE = 'dialog';\n\nconst messages = defineMessages({\n    backModalText: {\n        defaultMessage: 'Back',\n        description: 'Button to get back inside modal',\n        id: 'boxui.modalDialog.backModalText',\n    },\n    closeModalText: {\n        defaultMessage: 'Close Modal',\n        description: 'Button to close modal',\n        id: 'boxui.modalDialog.closeModalText',\n    },\n});\n\ntype Props = {\n    children: React.Node,\n    className?: string,\n    closeButtonProps: Object,\n    intl: Object,\n    modalRef?: Function,\n    onRequestBack?: Function,\n    onRequestClose?: Function,\n    title?: React.Node,\n    type?: 'alert' | 'dialog',\n};\n\nclass ModalDialog extends React.Component<Props> {\n    static defaultProps = {\n        type: DIALOG_TYPE,\n        closeButtonProps: {},\n    };\n\n    /**\n     * Handles clicking on the back button\n     * @param {SyntheticMouseEvent} event\n     * @return {void}\n     */\n    onBackButtonClick = (event: SyntheticMouseEvent<HTMLButtonElement>) => {\n        const { onRequestBack } = this.props;\n        if (onRequestBack) {\n            onRequestBack(event);\n        }\n    };\n\n    /**\n     * Handles clicking on the close button\n     * @param {SyntheticMouseEvent} event\n     * @return {void}\n     */\n    onCloseButtonClick = (event: SyntheticMouseEvent<HTMLButtonElement>) => {\n        const { onRequestClose } = this.props;\n        if (onRequestClose) {\n            onRequestClose(event);\n        }\n    };\n\n    modalID: string = uniqueId('modal');\n\n    /**\n     * Renders a button if onRequestBack is passed in\n     * @return {ReactElement|null} - Returns the button, or null if the button shouldn't be rendered\n     */\n    renderBackButton() {\n        const { intl } = this.props;\n        const { formatMessage } = intl;\n        return (\n            <button\n                aria-label={formatMessage(messages.backModalText)}\n                className=\"modal-back-button\"\n                data-testid=\"modal-back-button\"\n                onClick={this.onBackButtonClick}\n                type=\"button\"\n            >\n                <IconBack height={18} width={18} />\n            </button>\n        );\n    }\n\n    /**\n     * Renders a button if onRequestClose is passed in\n     * @return {ReactElement|null} - Returns the button, or null if the button shouldn't be rendered\n     */\n    renderCloseButton() {\n        const { closeButtonProps, intl } = this.props;\n        const { formatMessage } = intl;\n\n        return (\n            // eslint-disable-next-line react/button-has-type\n            <button\n                {...closeButtonProps}\n                aria-label={formatMessage(messages.closeModalText)}\n                className=\"modal-close-button\"\n                onClick={this.onCloseButtonClick}\n            >\n                <IconClose color=\"#909090\" height={18} width={18} />\n            </button>\n        );\n    }\n\n    renderContent() {\n        const { children, type } = this.props;\n\n        if (type !== ALERT_TYPE) {\n            return <div className=\"modal-content\">{children}</div>;\n        }\n\n        const elements = React.Children.toArray(children);\n        if (elements.length !== 2) {\n            throw new Error('Alert modal must have exactly two children: A message and <ModalActions>');\n        }\n\n        return (\n            <div className=\"modal-content\">\n                <p id={`${this.modalID}-desc`}>{elements[0]}</p>\n                {elements[1]}\n            </div>\n        );\n    }\n\n    render() {\n        const {\n            className,\n            modalRef,\n            onRequestBack,\n            onRequestClose,\n            title,\n            type,\n            ...rest // Useful for resin tagging, and other misc tags such as a11y\n        } = this.props;\n        const isAlertType = type === ALERT_TYPE;\n        const divProps = omit(rest, ['children', 'closeButtonProps', 'onRequestClose', 'intl']);\n\n        divProps.role = isAlertType ? 'alertdialog' : 'dialog';\n        divProps['aria-labelledby'] = `${this.modalID}-label`;\n        if (isAlertType) {\n            divProps['aria-describedby'] = `${this.modalID}-desc`;\n        }\n\n        return (\n            <div ref={modalRef} className={classNames('modal-dialog', className)} {...divProps}>\n                <div className=\"modal-header-container\">\n                    <div className=\"modal-header\">\n                        {onRequestBack && this.renderBackButton()}\n                        <h2 className=\"modal-title\" id={`${this.modalID}-label`}>\n                            {title}\n                        </h2>\n                    </div>\n                    {onRequestClose && this.renderCloseButton()}\n                </div>\n                {this.renderContent()}\n            </div>\n        );\n    }\n}\n\nexport { ModalDialog as ModalDialogBase };\nexport default injectIntl(ModalDialog);\n"],"file":"ModalDialog.js"}
{"version":3,"sources":["../../../src/elements/content-explorer/MoreOptions.js"],"names":["React","FormattedMessage","injectIntl","Button","DropdownMenu","Menu","MenuItem","Browser","IconEllipsis","bdlGray","messages","PERMISSION_CAN_DOWNLOAD","PERMISSION_CAN_RENAME","PERMISSION_CAN_DELETE","PERMISSION_CAN_SHARE","PERMISSION_CAN_PREVIEW","TYPE_FILE","TYPE_WEBLINK","MoreOptions","canPreview","canShare","canDownload","canDelete","canRename","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","intl","isSmall","item","onFocus","onDelete","onDownload","onRename","onShare","onPreview","permissions","type","allowPreview","allowOpen","allowDelete","allowShare","allowRename","allowDownload","isMobile","allowed","formatMessage","moreOptions","preview","open","delete","download","rename","share"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport type { IntlShape } from 'react-intl';\n\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray } from '../../styles/variables';\n\nimport messages from '../common/messages';\nimport {\n    PERMISSION_CAN_DOWNLOAD,\n    PERMISSION_CAN_RENAME,\n    PERMISSION_CAN_DELETE,\n    PERMISSION_CAN_SHARE,\n    PERMISSION_CAN_PREVIEW,\n    TYPE_FILE,\n    TYPE_WEBLINK,\n} from '../../constants';\n\nimport type { CommonGridViewFunctions } from './flowTypes';\nimport type { BoxItem } from '../../common/types/core';\n\nimport './MoreOptionsCell.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    intl: IntlShape,\n    isSmall: boolean,\n    item: BoxItem,\n    ...$Exact<CommonGridViewFunctions>,\n};\n\nconst MoreOptions = ({\n    canPreview,\n    canShare,\n    canDownload,\n    canDelete,\n    canRename,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    intl,\n    isSmall,\n    item,\n}: Props) => {\n    const onFocus = () => onItemSelect(item);\n    const onDelete = () => onItemDelete(item);\n    const onDownload = () => onItemDownload(item);\n    const onRename = () => onItemRename(item);\n    const onShare = () => onItemShare(item);\n    const onPreview = () => onItemPreview(item);\n\n    const { permissions, type } = item;\n\n    if (!permissions) {\n        return <span />;\n    }\n\n    const allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n    const allowOpen = type === TYPE_WEBLINK;\n    const allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n    const allowShare = canShare && permissions[PERMISSION_CAN_SHARE];\n    const allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n    const allowDownload =\n        canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n    const allowed = allowDelete || allowRename || allowDownload || allowPreview || allowShare || allowOpen;\n\n    if (!allowed) {\n        return <span />;\n    }\n    return (\n        <div className=\"bce-more-options\">\n            <DropdownMenu constrainToScrollParent isRightAligned>\n                <Button\n                    aria-label={intl.formatMessage(messages.moreOptions)}\n                    className=\"bce-btn-more-options\"\n                    data-testid=\"bce-btn-more-options\"\n                    onFocus={onFocus}\n                    type=\"button\"\n                >\n                    <IconEllipsis color={bdlGray} height={10} width={16} />\n                </Button>\n                <Menu>\n                    {allowPreview && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.preview} />\n                        </MenuItem>\n                    )}\n                    {allowOpen && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.open} />\n                        </MenuItem>\n                    )}\n                    {allowDelete && (\n                        <MenuItem onClick={onDelete}>\n                            <FormattedMessage {...messages.delete} />\n                        </MenuItem>\n                    )}\n                    {allowDownload && (\n                        <MenuItem onClick={onDownload}>\n                            <FormattedMessage {...messages.download} />\n                        </MenuItem>\n                    )}\n                    {allowRename && (\n                        <MenuItem onClick={onRename}>\n                            <FormattedMessage {...messages.rename} />\n                        </MenuItem>\n                    )}\n                    {allowShare && (\n                        <MenuItem onClick={onShare}>\n                            <FormattedMessage {...messages.share} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </DropdownMenu>\n            {allowShare && !isSmall && (\n                <Button onClick={onShare} onFocus={onFocus} type=\"button\">\n                    <FormattedMessage {...messages.share} />\n                </Button>\n            )}\n        </div>\n    );\n};\n\nexport default injectIntl(MoreOptions);\n"],"file":"MoreOptions.js"}